# Magic Rust Discord Bot

## Установка зависимостей
```shell
poetry install
```
Затем пишем: `poetry shell`  
Получаем путь нашего интерпретатор, затем ее можно указать в 
IDE, чтобы проект адекватно работал.

## Настройка бота
- ".env.example" переименовать в ".env"
- В файле .env:
    - Указать токен бота в поле DISCORD_BOT_TOKEN
    - В поле REDIS_URL должно быть redis://localhost:6379 при локальной развертке
- На сервер бота приглашать с правами администратора

## Настройка бота
- ".env.example" переименовать в ".env"
- В файле .env:
    - Указать токен бота в поле DISCORD_BOT_TOKEN
    - В поле REDIS_URL должно быть redis://localhost:6379 при локальной развертке
- В Discord Developer Portal:
    - Включить во вкладке Bot поле MESSAGE CONTENT INTENT
    - Сгенерировать ссылку на приглашение с правами администратора во вкладен OAuth2

## Запуск
Бот разделен на несколько приложений, по дефолту будут запущены все сразу.  
Для запуска нужны приложений нужно в ".env" файле изменить параметр SETUP_APPS=["app1", "app2].
Либо можно python -m bot app1, app2.  
Приоритет: аргументы в консоли, переменные окружения. 
Список доступных приложений можно увидеть в bot/apps.     
Запуск вспомогательных сервисов:
```shell
make up
```

Для запуска бота:
```shell
python -m bot
```

## Функционал

### Обслуживание постов (servicing_posts)
Позволяет автоматически обслуживать посты в выбранных каналах.  
Можно добавить возможность:
- Добавление лайка
- Добавления дизлайка
- Добавления комментариев
- Можно добавить игнорирование сообщений от бота, т.е. ему не будут ставиться выше выбранные параметры. 
- Можно добавить удаление сообщение в выбранном канале от всех ботов

Доступные команды для добавления, редактирования и удаление находятся в группе команд:  
`servicing-posts`  
Права доступа: Администратор

## Линтеры
В проекте есть линтеры, которые стилизует одинаково код.  
Для запуска: `pre-commit run --all-files`